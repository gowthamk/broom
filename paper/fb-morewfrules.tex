\begin{figure*}

\textbf{Method Well-formedness}  \; \fbox
  {\(d \; \mathtt{ok \; in} \; B \)}\\
%
\bigskip

%
\begin{minipage}{5.5in}
\begin{smathpar}
\begin{array}{c}
\renewcommand*{\arraystretch}{1.2}
\RULE
  {
    \rhoset,\rhoenv = \{\rhoalloc,\rhobar,\rhoalloc_m,\bar{\rho_m}\} \spc
    \aenv = [\bar{\tyvar} \mapsto \bar{\fgjN}] \spc
    \phicx = \phi \conj \phi_m \spc
    \A = (\rhoset,\rhoenv,\aenv,\phicx)\\
    \tywf{\rhoenv}{\phi_m} \spc
    \tywf{\A}{\bar{\tau^1}} \spc
    \tywf{\A}{\tau^2} \spc
    CT(B) = \headerOf{B}\{...\}\\
    \env = [\xbar\mapsto\bar{\tau^1},\thisZ\mapsto
            B\inang{\rhoalloc\rhobar}\inang{\bar{\tyvar}}] \spc
    override(m,\fbN,\inang{\rhoallocm\rhobarm \,|\, \phi_m}\bar{\tau^1} 
             \rightarrow \tau^2) \spc
    \stmtsem{\rhoallocm}{s}{\stmtsemcx}{\stmtsemcxp}\spc
    \hastyp{\exptycx{\rhoallocm}{\env'}}{e}{\tau^2}
  }
  {
    \okin 
        {\tau^2 \; m\inang{\rhoallocm\rhobarm \,|\, \phi_m}
              (\bar{\tau^1}\;\xbar)\{s;\,\C{return}\,e\}}
        {B}
  }
\end{array}
\end{smathpar}
\end{minipage}
%
\bigskip

\textbf{Class Well-formedness}  \; \fbox
  {\(B \; \mathtt{ok}\)}\\
%
\bigskip

%
\begin{minipage}{5.5in}
\begin{smathpar}
\begin{array}{c}
\renewcommand*{\arraystretch}{1.2}
\RULE
  {
    \rhoset,\rhoenv = \{\rhoalloc,\rhobar\} \spc
    \aenv = [\bar{\tyvar} \mapsto \bar{\fgjN}] \spc
    \A = (\rhoset,\rhoenv,\aenv,\phi)\\
    \tywf{\rhoenv}{\phi} \spc
    \tywf{\A}{\fbN} \spc
    \tywf{\A}{\bar{\tau^f}} \spc
    ctype(\fbN) = \bar{\tau^{\fbN}} \\
    k = B(\bar{\tau^f}\;\xbar,\bar{\tau^{\fbN}}\;\bar{y})
        \{\superZ(\xbar);\,\thisZ.\bar{f} = \bar{y}\} \spc
    \okin{\bar{d}}{B}
  }
  {
    {\headerOf{B}\{\bar{\tau^f}\;\bar{f};\,k\,\bar{d}\}} \;{\mathtt{ok}}
  }
\end{array}
\end{smathpar}
\end{minipage}
%

\caption{\fbname: Method and Class Well-formedness}
\label{fig:fb-morewfrules}
\end{figure*}
