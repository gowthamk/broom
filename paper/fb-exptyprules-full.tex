%
\begin{minipage}{0.4\textwidth}
\begin{smathpar}
\begin{array}{c}
\renewcommand*{\arraystretch}{1.2}
\RULE
  {
    \hastyp{\exptycx{\env}{\rgn}}{e_1}{\tau_1}\\
    \hastyp{\exptycx{\env[x\mapsto\tau_1]}{\rgn}}{e_2}{\tau_2}\\
  }
  {
    \hastyp{\exptycx{\env}{\rgn}}{\letexp{x}{e_1}{e_2}}{\tau_2}
  }
\end{array}
\end{smathpar}
\end{minipage}
%
%
\begin{minipage}{0.58\textwidth}
\begin{smathpar}
\begin{array}{c}
\renewcommand*{\arraystretch}{1.2}
\RULE
  {
%   \A = (\subtypcx)\\
%   \loc \in \rhoenv \spc
%   \hastyp{\exptycx{\env}}{e}{\tau}
    \A = (\subtypcx) \spc
    \loc \notin \rhoenv \\
    \A' = (\rhoenv\cup\{\loc\}, \aenv, \phicx \conj \Delta \outlives
    \loc)\\
    \hastyp{\A',\env,\loc}{e}{\tau} \spc
    \tywf{\A}{\tau}
  }
  {
    \hastyp{\exptycx{\env}{\rgn}}{\letd{\loc}{e}}{\tau}
  }
\end{array}
\end{smathpar}
\end{minipage}
%

%
\begin{minipage}{\textwidth}
\begin{smathpar}
\begin{array}{c}
\renewcommand*{\arraystretch}{1.2}
\RULE
  {
    \A = (\subtypcx)\spc
    \A' = (\rhoenv\cup\{\loc\}, \aenv,\phicx) \spc
%   \mem(\loc) = \USED \spc
    \tywf{\A'}{T@\loc} \spc
%   \fgjN = \RgnZ\inang{T}\spc
    \hastyp{\A',\env, \loc}{e}{T@\loc}
  }
  {
    \hastyp{\exptycx{\env}{\rgn}}{\C{new}\;
    \RgnZT{\toploc\loc}(e)} {\RgnZT{\toprgn}}
  }
\end{array}
\end{smathpar}
\end{minipage}
%



%
\begin{minipage}{3.4in}
\begin{smathpar}
\begin{array}{c}
\renewcommand*{\arraystretch}{1.2}
\RULE
  {
%   \A = (\subtypcx)\\
%   \loc \in \rhoenv \spc
%   \hastyp{\exptycx{\env}}{e}{\tau}
    \A = (\subtypcx) \spc
%   \loc \notin \rhoenv \\ % An open region can be opened again.
%   \loc \notin dom(\mem) \spc
    \A' = (\rhoenv\cup\{\loc\},\aenv,\phicx) \\
    \loc \in \Delta ~\texttt{implies}~ s = \LIVE \spc
    \hastyp{\A',\env,\loc}{e}{\tau} \spc
    \tywf{\A}{\tau}
  }
  {
    \hastyp{\exptycx{\env}{\rgn}}{\opened{\loc}{s}{e}}{\tau}
  }
\end{array}
\end{smathpar}
\end{minipage}
%
% %
% \begin{minipage}{2in}
% \begin{smathpar}
% \begin{array}{c}
% \renewcommand*{\arraystretch}{1.2}
% \RULE
%   {
%     \\
%     \\
%     \hastyp{\exptycx{\env}{\rgn}}{e}{\RgnZ\inang{T}\inang{\toprgn}}
%   }
%   {
%     \hastyp{\exptycx{\env}{\rgn}}{e.\transfer(\ldots)}{\unitZ}
%   }
% \end{array}
% \end{smathpar}
% \end{minipage}
%
\begin{minipage}{1.2in}
\begin{smathpar}
\begin{array}{c}
\renewcommand*{\arraystretch}{1.2}
\RULE
  {
    \hastyp{\exptycx{\env}{\rgn}}{e}{\tau} \\
    \subtyp{\A}{\tau}{\tau'}
  }
  {
    \hastyp{\exptycx{\env}{\rgn}}{e}{\tau'}
  }
\end{array}
\end{smathpar}
\end{minipage}
%
